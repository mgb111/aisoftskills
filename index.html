document.addEventListener("DOMContentLoaded", function () {
    // Training data for each skill
    const trainingData = {
        communication: {
            title: "Communication Skills",
            description: "Effective communication involves clarity, active listening, and empathy. Practice by summarizing conversations and asking clarifying questions.",
            quiz: {
                question: "What is a key component of active listening?",
                options: [
                    { text: "Interrupting the speaker", correct: false },
                    { text: "Summarizing what was said", correct: true },
                    { text: "Talking over the speaker", correct: false }
                ]
            }
        },
        teamwork: {
            title: "Teamwork Skills",
            description: "Teamwork requires collaboration, trust, and adaptability. Engage in group activities and provide constructive feedback to peers.",
            quiz: {
                question: "What is essential for effective teamwork?",
                options: [
                    { text: "Avoiding communication", correct: false },
                    { text: "Trust and collaboration", correct: true },
                    { text: "Ignoring feedback", correct: false }
                ]
            }
        },
        problem-solving: {
            title: "Problem-Solving Skills",
            description: "To enhance problem-solving, define issues clearly, brainstorm solutions, and evaluate outcomes. Try using the 5 Whys technique to find root causes.",
            quiz: {
                question: "What is the first step in problem-solving?",
                options: [
                    { text: "Jumping to conclusions", correct: false },
                    { text: "Defining the problem", correct: true },
                    { text: "Blaming others", correct: false }
                ]
            }
        }
    };

    // Ensure elements are loaded before adding event listeners
    const startButton = document.getElementById("startButton");
    const submitQuizButton = document.getElementById("submitQuiz");

    if (startButton && submitQuizButton) {
        startButton.addEventListener("click", startTraining);
        submitQuizButton.addEventListener("click", submitQuiz);
    }

    function startTraining() {
        const skill = document.getElementById("skill").value;
        if (!skill) {
            alert("Please select a soft skill to begin training.");
            return;
        }

        const data = trainingData[skill];
        if (!data) {
            alert("Invalid skill selected.");
            return;
        }

        // Display training content
        document.getElementById("skill-title").textContent = data.title;
        document.getElementById("skill-description").textContent = data.description;
        document.getElementById("training-content").style.display = "block";

        // Set up quiz
        document.getElementById("quiz-question").textContent = data.quiz.question;
        const optionsHtml = data.quiz.options.map((option, index) => `
            <label>
                <input type="radio" name="quiz-option" value="${index}">
                ${option.text}
            </label><br>
        `).join("");
        document.getElementById("quiz-options").innerHTML = optionsHtml;
        document.getElementById("quiz").style.display = "block";
        document.getElementById("feedback").style.display = "none";
    }

    function submitQuiz() {
        const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
        if (!selectedOption) {
            alert("Please select an answer.");
            return;
        }

        const skill = document.getElementById("skill").value;
        const selectedIndex = parseInt(selectedOption.value);
        const isCorrect = trainingData[skill].quiz.options[selectedIndex].correct;

        const feedback = document.getElementById("feedback");
        feedback.textContent = isCorrect ? "✅ Correct! You are on the right track." : "❌ Incorrect. Try reviewing the material again.";
        feedback.style.display = "block";
    }
});
